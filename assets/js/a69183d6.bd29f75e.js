"use strict";(globalThis.webpackChunkbook=globalThis.webpackChunkbook||[]).push([[365],{8203:(e,a,r)=>{r.r(a),r.d(a,{assets:()=>o,contentTitle:()=>l,default:()=>m,frontMatter:()=>s,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"module-1/ch3-python-integration/parameters","title":"Section 2 - Working with Parameters","description":"Estimated Reading Time: 8 minutes","source":"@site/docs/module-1/ch3-python-integration/02-parameters.md","sourceDirName":"module-1/ch3-python-integration","slug":"/module-1/ch3-python-integration/parameters","permalink":"/physical-ai-textbook/docs/module-1/ch3-python-integration/parameters","draft":false,"unlisted":false,"editUrl":"https://github.com/92Bilal26/physical-ai-textbook/tree/main/docs/module-1/ch3-python-integration/02-parameters.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Section 2 - Working with Parameters"},"sidebar":"tutorialSidebar","previous":{"title":"Section 1 - rclpy Basics","permalink":"/physical-ai-textbook/docs/module-1/ch3-python-integration/rclpy-basics"},"next":{"title":"Section 3 - Actions for Goal-Reaching","permalink":"/physical-ai-textbook/docs/module-1/ch3-python-integration/actions"}}');var t=r(4848),i=r(8453);const s={title:"Section 2 - Working with Parameters"},l="Section 2: Working with Parameters",o={},c=[{value:"What are Parameters?",id:"what-are-parameters",level:2},{value:"Declaring Parameters",id:"declaring-parameters",level:2},{value:"Reading Parameters",id:"reading-parameters",level:2},{value:"Using Parameters in Code",id:"using-parameters-in-code",level:2},{value:"Reacting to Parameter Changes",id:"reacting-to-parameter-changes",level:2},{value:"Using Parameters from Command Line",id:"using-parameters-from-command-line",level:2},{value:"Example: Parameter-Based Controller",id:"example-parameter-based-controller",level:2},{value:"Benefits of Parameters",id:"benefits-of-parameters",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2}];function d(e){const a={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.header,{children:(0,t.jsx)(a.h1,{id:"section-2-working-with-parameters",children:"Section 2: Working with Parameters"})}),"\n",(0,t.jsxs)(a.p,{children:[(0,t.jsx)(a.strong,{children:"Estimated Reading Time"}),": 8 minutes"]}),"\n",(0,t.jsx)(a.h2,{id:"what-are-parameters",children:"What are Parameters?"}),"\n",(0,t.jsx)(a.p,{children:"Parameters are configuration values stored on the ROS 2 parameter server. They allow you to:"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsx)(a.li,{children:"Configure node behavior at runtime (no recompile needed)"}),"\n",(0,t.jsx)(a.li,{children:"Change settings without restarting the node"}),"\n",(0,t.jsx)(a.li,{children:"Share configuration across multiple nodes"}),"\n"]}),"\n",(0,t.jsx)(a.p,{children:"Common parameters:"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsxs)(a.li,{children:[(0,t.jsx)(a.code,{children:"max_velocity"}),": Speed limits for safety"]}),"\n",(0,t.jsxs)(a.li,{children:[(0,t.jsx)(a.code,{children:"control_frequency"}),": How often to update (Hz)"]}),"\n",(0,t.jsxs)(a.li,{children:[(0,t.jsx)(a.code,{children:"enable_logging"}),": Debug output on/off"]}),"\n",(0,t.jsxs)(a.li,{children:[(0,t.jsx)(a.code,{children:"robot_name"}),": Which robot to control"]}),"\n"]}),"\n",(0,t.jsx)(a.h2,{id:"declaring-parameters",children:"Declaring Parameters"}),"\n",(0,t.jsx)(a.p,{children:"Before using a parameter, declare it with a default value:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-python",children:"self.declare_parameter('max_velocity', 1.0)\r\nself.declare_parameter('control_frequency', 10.0)\r\nself.declare_parameter('enable_logging', True)\r\nself.declare_parameter('robot_name', 'default_robot')\n"})}),"\n",(0,t.jsx)(a.h2,{id:"reading-parameters",children:"Reading Parameters"}),"\n",(0,t.jsx)(a.p,{children:"Read parameter values in your code:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-python",children:"# Read a double parameter\r\nmax_vel = self.get_parameter('max_velocity').get_parameter_value().double_value\r\n\r\n# Read a boolean parameter\r\nenable_log = self.get_parameter('enable_logging').get_parameter_value().bool_value\r\n\r\n# Read a string parameter\r\nrobot_name = self.get_parameter('robot_name').get_parameter_value().string_value\n"})}),"\n",(0,t.jsx)(a.h2,{id:"using-parameters-in-code",children:"Using Parameters in Code"}),"\n",(0,t.jsx)(a.p,{children:"Use parameter values to control behavior:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-python",children:"# Clamp desired velocity to max\r\ndesired_vel = 2.0\r\nmax_velocity = self.get_parameter('max_velocity').get_parameter_value().double_value\r\nactual_vel = min(desired_vel, max_velocity)\r\n\r\nmsg = Twist()\r\nmsg.linear.x = actual_vel\r\nself.publisher_.publish(msg)\n"})}),"\n",(0,t.jsx)(a.h2,{id:"reacting-to-parameter-changes",children:"Reacting to Parameter Changes"}),"\n",(0,t.jsx)(a.p,{children:"Register a callback to respond when parameters change:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-python",children:"self.add_on_set_parameters_callback(self.parameter_callback)\r\n\r\ndef parameter_callback(self, params):\r\n    for param in params:\r\n        if param.name == 'max_velocity':\r\n            self.get_logger().info(f'Max velocity changed to {param.value}')\r\n    return SetParametersResult(successful=True)\n"})}),"\n",(0,t.jsx)(a.h2,{id:"using-parameters-from-command-line",children:"Using Parameters from Command Line"}),"\n",(0,t.jsx)(a.p,{children:"View and modify parameters without restarting:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"# List all parameters\r\nros2 param list\r\n\r\n# Get a parameter value\r\nros2 param get /node_name max_velocity\r\n\r\n# Set a parameter\r\nros2 param set /node_name max_velocity 2.5\n"})}),"\n",(0,t.jsx)(a.h2,{id:"example-parameter-based-controller",children:"Example: Parameter-Based Controller"}),"\n",(0,t.jsxs)(a.p,{children:["See ",(0,t.jsx)(a.code,{children:"param_node.py"})," in code-examples for a complete example that:"]}),"\n",(0,t.jsxs)(a.ol,{children:["\n",(0,t.jsx)(a.li,{children:"Declares parameters with defaults"}),"\n",(0,t.jsx)(a.li,{children:"Reads parameters in callbacks"}),"\n",(0,t.jsx)(a.li,{children:"Responds to parameter changes"}),"\n",(0,t.jsx)(a.li,{children:"Uses parameters to limit behavior"}),"\n"]}),"\n",(0,t.jsx)(a.h2,{id:"benefits-of-parameters",children:"Benefits of Parameters"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsx)(a.li,{children:"Flexibility: Change behavior at runtime"}),"\n",(0,t.jsx)(a.li,{children:"Reusability: Same code works for different robots"}),"\n",(0,t.jsx)(a.li,{children:"Tuning: Adjust PID gains, speeds, without recompiling"}),"\n",(0,t.jsx)(a.li,{children:"Safety: Limit maximum speeds without code changes"}),"\n"]}),"\n",(0,t.jsx)(a.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsx)(a.li,{children:"Parameters are configuration values on the parameter server"}),"\n",(0,t.jsx)(a.li,{children:"Declare parameters with default values"}),"\n",(0,t.jsx)(a.li,{children:"Read parameters using get_parameter()"}),"\n",(0,t.jsx)(a.li,{children:"React to changes with callbacks"}),"\n",(0,t.jsx)(a.li,{children:"Change at runtime using ros2 param set"}),"\n",(0,t.jsx)(a.li,{children:"Use parameters to make code flexible and reusable"}),"\n"]}),"\n",(0,t.jsxs)(a.p,{children:[(0,t.jsx)(a.strong,{children:"Next"}),": ",(0,t.jsx)(a.a,{href:"/physical-ai-textbook/docs/module-1/ch3-python-integration/actions",children:"Section 3: Actions"})]})]})}function m(e={}){const{wrapper:a}={...(0,i.R)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,a,r)=>{r.d(a,{R:()=>s,x:()=>l});var n=r(6540);const t={},i=n.createContext(t);function s(e){const a=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function l(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),n.createElement(i.Provider,{value:a},e.children)}}}]);