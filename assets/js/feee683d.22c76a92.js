"use strict";(globalThis.webpackChunkbook=globalThis.webpackChunkbook||[]).push([[497],{1827:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"module-1/ch3-python-integration/rclpy-basics","title":"Section 1 - rclpy Basics","description":"Estimated Reading Time: 8-10 minutes","source":"@site/docs/module-1/ch3-python-integration/01-rclpy-basics.md","sourceDirName":"module-1/ch3-python-integration","slug":"/module-1/ch3-python-integration/rclpy-basics","permalink":"/physical-ai-textbook/docs/module-1/ch3-python-integration/rclpy-basics","draft":false,"unlisted":false,"editUrl":"https://github.com/92Bilal26/physical-ai-textbook/tree/main/docs/module-1/ch3-python-integration/01-rclpy-basics.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Section 1 - rclpy Basics"},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 3 Learning Objectives","permalink":"/physical-ai-textbook/docs/module-1/ch3-python-integration/learning-objectives"},"next":{"title":"Section 2 - Working with Parameters","permalink":"/physical-ai-textbook/docs/module-1/ch3-python-integration/parameters"}}');var r=t(4848),o=t(8453);const l={title:"Section 1 - rclpy Basics"},s="Section 1: rclpy Basics and Node Structure",c={},a=[{value:"What is rclpy?",id:"what-is-rclpy",level:2},{value:"Basic Node Structure",id:"basic-node-structure",level:2},{value:"The Control Loop",id:"the-control-loop",level:2},{value:"Velocity Controller Example",id:"velocity-controller-example",level:2},{value:"Integration with Chapter 2",id:"integration-with-chapter-2",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"section-1-rclpy-basics-and-node-structure",children:"Section 1: rclpy Basics and Node Structure"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Estimated Reading Time"}),": 8-10 minutes"]}),"\n",(0,r.jsx)(n.h2,{id:"what-is-rclpy",children:"What is rclpy?"}),"\n",(0,r.jsx)(n.p,{children:"rclpy (ROS 2 Client Library for Python) is the Python interface to ROS 2. It allows you to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Create ROS 2 nodes in Python"}),"\n",(0,r.jsx)(n.li,{children:"Publish and subscribe to topics"}),"\n",(0,r.jsx)(n.li,{children:"Call and provide services"}),"\n",(0,r.jsx)(n.li,{children:"Send and receive actions"}),"\n",(0,r.jsx)(n.li,{children:"Use the parameter server"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"basic-node-structure",children:"Basic Node Structure"}),"\n",(0,r.jsx)(n.p,{children:"Every ROS 2 Python node follows this pattern:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\n\r\nclass MyNode(Node):\r\n    def __init__(self):\r\n        super().__init__('my_node')\r\n        self.publisher_ = self.create_publisher(Twist, '/cmd_vel', 10)\r\n        self.timer_ = self.create_timer(0.1, self.timer_callback)\r\n\r\n    def timer_callback(self):\r\n        msg = Twist()\r\n        self.publisher_.publish(msg)\r\n\r\ndef main():\r\n    rclpy.init()\r\n    node = MyNode()\r\n    rclpy.spin(node)\r\n    node.destroy_node()\r\n    rclpy.shutdown()\n"})}),"\n",(0,r.jsx)(n.h2,{id:"the-control-loop",children:"The Control Loop"}),"\n",(0,r.jsx)(n.p,{children:"You must publish velocity commands repeatedly. Use a timer to create a control loop:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Timer period: 0.1 seconds (10 Hz)"}),"\n",(0,r.jsx)(n.li,{children:"Callback runs every 0.1 seconds"}),"\n",(0,r.jsx)(n.li,{children:"Publish velocity commands in the callback"}),"\n",(0,r.jsx)(n.li,{children:"Robot receives repeated commands and moves smoothly"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"velocity-controller-example",children:"Velocity Controller Example"}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.code,{children:"velocity_controller.py"})," in code-examples for a complete example that:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Creates a publisher for Twist messages"}),"\n",(0,r.jsx)(n.li,{children:"Sets up a 10 Hz control loop"}),"\n",(0,r.jsx)(n.li,{children:"Publishes velocity commands"}),"\n",(0,r.jsx)(n.li,{children:"Moves the robot in patterns"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"integration-with-chapter-2",children:"Integration with Chapter 2"}),"\n",(0,r.jsx)(n.p,{children:"The Python control code integrates with the URDF robots:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Python Node -> Publishes to /cmd_vel -> Gazebo -> Robot moves\n"})}),"\n",(0,r.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"rclpy is the Python interface to ROS 2"}),"\n",(0,r.jsx)(n.li,{children:"Nodes inherit from Node class"}),"\n",(0,r.jsx)(n.li,{children:"Publishers send messages to topics"}),"\n",(0,r.jsx)(n.li,{children:"Timers create control loops"}),"\n",(0,r.jsx)(n.li,{children:"Twist contains linear and angular velocity"}),"\n",(0,r.jsx)(n.li,{children:"Control loops must run repeatedly (typically 10 Hz)"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Next"}),": ",(0,r.jsx)(n.a,{href:"/physical-ai-textbook/docs/module-1/ch3-python-integration/parameters",children:"Section 2: Parameters"})]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>s});var i=t(6540);const r={},o=i.createContext(r);function l(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);